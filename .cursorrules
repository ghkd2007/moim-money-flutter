# 🚀 머니투게더 (Money Together) - Cursor AI Rules

## 📋 프로젝트 개요
**앱 이름**: 머니투게더 (Money Together)  
**앱 목적**: 특정 사람들로 구성된 모임 멤버들이 서로간의 지출, 예산, 수입 등 경제활동과 관련된 것을 서로 확인하고 조회하는 앱  
**핵심 가치**: "함께하는 투명한 금융 관리"  
**기술 스택**: Flutter + Firebase (Android 우선, iOS 향후)

## 🎯 핵심 기능 (우선순위 순)
1. **수입/지출 CRUD** - 기본적인 금융 데이터 관리
2. **모임별 카테고리 CRUD** - 그룹별 분류 관리
3. **모임 초대/수락** - 멤버 관리 시스템
4. **캘린더뷰** - 날짜별 지출/수입 시각화
5. **SMS 자동 데이터 추출** - 은행/카드사 문자 자동 인식

## 📁 프로젝트 구조 규칙
```
lib/
├── models/           # 데이터 모델 (소문자, 복수형)
├── screens/          # 화면 컴포넌트
├── widgets/          # 재사용 가능한 위젯
├── services/         # 비즈니스 로직 서비스
├── utils/            # 유틸리티 함수
├── constants/        # 상수 정의
└── main.dart         # 앱 진입점
```

## 🔤 명명 규칙

### 파일명
- `snake_case` 사용: `user_model.dart`, `transaction_screen.dart`
- 기능을 명확히 설명하는 이름 사용
- ❌ `UserModel.dart`, `screen.dart` (대문자 시작, 너무 일반적)

### 변수명
- 명확하고 이해하기 쉬운 이름: `String userName`, `int totalAmount`
- 리스트는 복수형: `List<Transaction> transactions`
- ❌ `String u`, `int amt` (너무 짧거나 모호)

### 함수명
- 동사로 시작: `void createTransaction()`, `bool isValidEmail()`
- CRUD 작업: `addTransaction()`, `getTransactionById()`
- ❌ `void process()`, `void handle()` (너무 일반적)

### 클래스명
- `PascalCase` 사용: `class UserModel`, `class TransactionService`
- ❌ `snake_case` 사용 금지

## 📝 주석 작성 규칙

### 클래스 주석
```dart
/// 사용자 인증 서비스
/// 이메일과 비밀번호를 사용하여 로그인을 처리합니다.
class AuthService {
  /// 사용자 로그인 처리
  /// 
  /// [email] 사용자 이메일
  /// [password] 사용자 비밀번호
  /// 
  /// Returns 로그인 성공 여부
  Future<bool> login(String email, String password) async {
    // Firebase 인증 서비스 호출
    try {
      final result = await FirebaseAuth.instance.signInWithEmailAndPassword(
        email: email,
        password: password,
      );
      return result.user != null;
    } catch (e) {
      // 로그인 실패 시 false 반환
      return false;
    }
  }
}
```

### 복잡한 로직 주석
```dart
void calculateTotalAmount() {
  // 1단계: 기본 금액 계산
  double baseAmount = items.fold(0.0, (sum, item) => sum + item.price);
  
  // 2단계: 할인율 적용 (10% 할인)
  double discountAmount = baseAmount * 0.1;
  
  // 3단계: 세금 계산 (부가세 10%)
  double taxAmount = (baseAmount - discountAmount) * 0.1;
  
  // 4단계: 최종 금액 계산
  totalAmount = baseAmount - discountAmount + taxAmount;
}
```

## 🏗️ 코드 구조 및 포맷팅

### 들여쓰기 및 공백
- 2칸 들여쓰기 사용
- 일관된 공백 유지
- 함수 길이는 50줄 이내로 제한
- 복잡한 로직은 작은 함수들로 분리

### 함수 분리 예시
```dart
class TransactionService {
  /// 거래내역 생성
  Future<void> createTransaction(Transaction transaction) async {
    // 1. 입력 데이터 검증
    _validateTransaction(transaction);
    
    // 2. Firebase에 저장
    await _saveToFirebase(transaction);
    
    // 3. 로컬 캐시 업데이트
    _updateLocalCache(transaction);
    
    // 4. 알림 발송
    _sendNotification(transaction);
  }
  
  /// 거래내역 데이터 검증
  void _validateTransaction(Transaction transaction) {
    if (transaction.amount <= 0) {
      throw ArgumentError('금액은 0보다 커야 합니다.');
    }
    if (transaction.description.isEmpty) {
      throw ArgumentError('설명을 입력해주세요.');
    }
  }
}
```

## 🚨 에러 처리 규칙

### 예외 처리
```dart
class TransactionService {
  Future<Transaction> getTransaction(String id) async {
    try {
      // Firebase에서 데이터 조회
      final doc = await FirebaseFirestore.instance
          .collection('transactions')
          .doc(id)
          .get();
      
      if (!doc.exists) {
        throw TransactionNotFoundException('거래내역을 찾을 수 없습니다: $id');
      }
      
      return Transaction.fromMap(doc.data()!);
    } on FirebaseException catch (e) {
      // Firebase 관련 에러 처리
      throw TransactionServiceException('데이터베이스 오류: ${e.message}');
    } catch (e) {
      // 기타 예상치 못한 에러 처리
      throw TransactionServiceException('알 수 없는 오류: $e');
    }
  }
}
```

## 🌿 Git 브랜치 전략

### 브랜치 종류
```
main (또는 master)          # 메인 브랜치 - 안정적인 버전
├── develop                 # 개발 브랜치 - 통합 테스트용
├── feature/지출추가        # 기능 개발 브랜치
├── feature/사용자인증      # 기능 개발 브랜치
├── bugfix/로그인오류       # 버그 수정 브랜치
└── hotfix/긴급수정         # 긴급 수정 브랜치
```

### 브랜치 생성 규칙
```bash
# ✅ 좋은 예시:
git checkout -b feature/지출추가          # 기능 개발
git checkout -b bugfix/로그인오류         # 버그 수정
git checkout -b hotfix/긴급수정          # 긴급 수정

# ❌ 나쁜 예시:
git checkout -b new                     # 너무 모호함
git checkout -b fix                     # 무엇을 수정하는지 모름
```

## 💬 커밋 메시지 규칙

### 커밋 타입
```bash
feat: 새로운 기능 추가
fix: 버그 수정
docs: 문서 수정
style: 코드 포맷팅 (기능 변경 없음)
refactor: 코드 리팩토링 (기능 변경 없음)
test: 테스트 코드 추가/수정
chore: 빌드 프로세스 또는 보조 도구 변경
```

### 커밋 메시지 예시
```bash
# ✅ 좋은 예시:
feat(transaction): 지출 추가 화면 구현
- 금액 입력 필드 추가
- 카테고리 선택 드롭다운 구현
- 저장 버튼 및 유효성 검사 추가

fix(auth): 로그인 후 화면 전환 오류 수정
- Navigator.push 대신 Navigator.pushReplacement 사용
- 로그인 성공 시 홈 화면으로 올바르게 이동

# ❌ 나쁜 예시:
update
fix bug
add something
```

## 🔄 Pull Request 규칙

### PR 제목 규칙
```
# ✅ 좋은 예시:
feat: 지출 추가 기능 구현
fix: 로그인 후 화면 전환 오류 수정
docs: 프로젝트 설치 가이드 추가

# ❌ 나쁜 예시:
Update
Bug fix
New feature
```

### PR 설명 템플릿
```markdown
## 🎯 변경사항 요약
- 지출 추가 화면 구현
- 금액 입력 및 카테고리 선택 기능 추가
- Firebase 연동으로 데이터 저장

## 🔍 변경된 파일
- `lib/screens/add_transaction_screen.dart` (신규)
- `lib/models/transaction.dart` (수정)
- `lib/services/transaction_service.dart` (신규)

## 🧪 테스트 방법
1. 앱 실행 후 지출 추가 버튼 클릭
2. 금액 입력 및 카테고리 선택
3. 저장 버튼 클릭하여 데이터 저장 확인

## ✅ 체크리스트
- [ ] 코드가 프로젝트 스타일 가이드를 따름
- [ ] 자체 테스트 완료
- [ ] 문서 업데이트 (필요시)
- [ ] 기존 기능에 영향 없음
```

## 🚫 Git 금지사항

### 절대 하지 말아야 할 것들
```bash
# ❌ 절대 금지:
git push origin main              # 메인 브랜치에 직접 푸시
git commit -m "update"            # 의미 없는 커밋 메시지
git add .                         # 모든 파일을 무분별하게 추가
git commit --no-verify            # 커밋 전 검사 건너뛰기
git force push                    # 강제 푸시 (팀원 코드 덮어쓰기)
```

## 🧪 테스트 코드 규칙

### 테스트 파일명 규칙
```
✅ 좋은 예시:
test/
├── models/
│   ├── transaction_test.dart
│   └── user_test.dart
├── services/
│   ├── auth_service_test.dart
│   └── transaction_service_test.dart
└── widgets/
    └── transaction_card_test.dart

❌ 나쁜 예시:
test/
├── test1.dart
├── test2.dart
└── main_test.dart
```

### 테스트 함수명 규칙
```dart
void main() {
  group('Transaction Model Tests', () {
    test('should create transaction with valid data', () {
      // 테스트 내용
    });
    
    test('should throw error when amount is negative', () {
      // 테스트 내용
    });
    
    test('should format currency correctly', () {
      // 테스트 내용
    });
  });
}
```

## 🎨 UI/UX 디자인 가이드라인

### 디자인 원칙
- **스타일**: 모던하고 깔끔한 디자인
- **특화**: 모바일에 특화된 디자인 및 레이아웃
- **직관성**: 3초 내에 원하는 기능 찾기
- **효율성**: 최소 3번의 터치로 지출 입력
- **일관성**: 모든 화면에서 동일한 디자인 패턴

### 색상 테마
- **메인 컬러**: 파란색 계열 (#2196F3, #1976D2)
- **수입**: 초록색 계열 (#4CAF50, #66BB6A)
- **지출**: 빨간색 계열 (#F44336, #EF5350)
- **배경**: 밝은 회색 (#FAFAFA)
- **텍스트**: 진한 회색 (#212121)

### 모바일 특화 디자인
- **터치 친화적**: 최소 터치 영역 48x48dp 이상
- **터치 간격**: 요소들 사이 최소 8dp 간격
- **한 손 조작**: 엄지손가락이 닿는 영역에 중요 기능 배치
- **세로 방향 우선**: 세로 스크롤이 주된 네비게이션

### 네비게이션 패턴
```
메인 탭 구조:
├── 🏠 홈 (대시보드)
├── 💰 거래내역
├── 📅 캘린더
├── 👥 모임
└── ⚙️ 설정

플로팅 액션:
└── ➕ 거래 추가 (핵심 기능)
```

## ☁️ Firebase 아키텍처 규칙

### 데이터베이스 구조 (Firestore)
```
users (사용자)
├── userId
    ├── profile: {name, email, phone}
    ├── groups: [groupId1, groupId2, ...]
    └── settings: {notifications, theme}

groups (모임)
├── groupId
    ├── info: {name, description, createdAt}
    ├── members: [userId1, userId2, ...]
    ├── categories: [categoryId1, categoryId2, ...]
    └── transactions: [transactionId1, transactionId2, ...]

categories (카테고리)
├── categoryId
    ├── groupId: "그룹 소속"
    ├── name: "식비", "교통비" 등
    ├── color: "#FF5733"
    └── icon: "🍽️"

transactions (거래내역)
├── transactionId
    ├── groupId: "모임 ID"
    ├── userId: "작성자 ID"
    ├── type: "income" | "expense"
    ├── amount: 50000
    ├── categoryId: "카테고리 ID"
    ├── description: "설명"
    ├── date: "2024-01-15"
    ├── location: "위치 정보"
    └── smsData: {bank, card, amount} // SMS 자동 추출 데이터
```

### 보안 규칙
- 사용자는 자신의 데이터만 접근 가능
- 모임 멤버는 해당 모임의 데이터만 접근 가능
- 관리자는 모임 설정 변경 가능
- 민감한 정보는 암호화하여 저장

## 🔧 코드 품질 도구

### 자동 포맷팅
```bash
# 코드 자동 포맷팅
flutter format lib/

# 특정 파일만 포맷팅
flutter format lib/main.dart
```

### 린트 검사
```bash
# 코드 품질 검사
flutter analyze

# 특정 규칙만 검사
flutter analyze --no-fatal-infos
```

### 코드 정리
```bash
# 프로젝트 정리
flutter clean

# 의존성 재설치
flutter pub get
```

## 📅 개발 일정 및 우선순위

### Phase 1: MVP (2-3주)
**목표**: 기본적인 지출 관리 앱 완성
- **Week 1**: 프로젝트 설정 및 기본 구조
- **Week 2**: 핵심 기능 개발 (사용자 인증, 지출 추가)
- **Week 3**: 기본 UI 완성

### Phase 2: 기능 확장 (2-3주)
**목표**: 핵심 기능 완성 및 사용성 개선
- **Week 4-5**: 수입 관리 및 데이터 연동
- **Week 6**: 모임 시스템 기초

### Phase 3: 고급 기능 (2-3주)
**목표**: 차별화된 기능 구현
- **Week 7-8**: 캘린더 및 통계
- **Week 9**: SMS 자동화

### Phase 4: 최적화 및 테스트 (1-2주)
**목표**: 앱 완성 및 출시 준비
- **Week 10-11**: 성능 최적화, UI/UX 개선
- **Week 12**: 테스트 및 출시

## 🚀 빠른 시작 체크리스트

### ✅ 1단계: 프로젝트 이해
- [ ] 프로젝트 목표와 방향 이해
- [ ] 개발 일정 확인

### ✅ 2단계: 개발 환경 설정
- [ ] Git 설정 및 브랜치 전략 이해
- [ ] Firebase 프로젝트 설정

### ✅ 3단계: 개발 시작
- [ ] 코딩 표준에 따라 코드 작성
- [ ] UI/UX 가이드라인 준수
- [ ] 정기적인 테스트 및 품질 점검

## 🤝 팀 협업 가이드

### 코드 리뷰 시
- 코딩 표준 기준으로 검토
- 건설적인 피드백 제공
- 테스트 커버리지 확인

### 브랜치 관리
- 명확한 커밋 메시지 작성
- Pull Request 템플릿 활용
- 충돌 해결 시 팀원과 논의

### 품질 관리
- 정기적인 코드 품질 점검
- 테스트 커버리지 모니터링
- 사용자 피드백 수집 및 반영

## 📞 도움말

### 질문이 있을 때
1. 먼저 이 RULES 문서 확인
2. 팀원과 논의
3. 필요시 문서 업데이트

### 문서 개선 제안
- 새로운 아이디어나 개선사항 제안
- 팀원들과 논의 후 문서 반영
- 정기적인 문서 리뷰 및 업데이트

---

**문서 버전**: 1.0  
**최종 업데이트**: 2024년 1월  
**작성자**: 개발팀  
**검토자**: 프로젝트 매니저

> 💡 **팁**: 이 RULES는 프로젝트와 함께 성장합니다. 새로운 경험이나 지식을 바탕으로 지속적으로 업데이트해주세요!
